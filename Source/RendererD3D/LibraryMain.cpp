////////////////////////////////////////////////////////////////////////////////

#include "Common.h"

////////////////////////////////////////////////////////////////////////////////

//#define RENDERER_API __declspec( dllexport )

/*
================================================================================
//	Name:
//	Desc:
================================================================================
*/
class CRendererLibInfo : public ILibrary
{
	public :

		CRendererLibInfo() :
		   m_nNumInterfaces( 1 )
		{
		}

		//======================================================================
		//
		//======================================================================
		size_t GetNumInterfaces() const
		{
			return m_nNumInterfaces;
		}

		//======================================================================
		//
		//======================================================================
		const TIntfDesc * GetInterfaceDesc( size_t nInterfaceID ) const
		{
			if ( nInterfaceID < m_nNumInterfaces )
			{
				switch ( nInterfaceID )
				{
					case 0: return &CRendererD3D::ms_ClassDesc;
				}
			}

			return NULL;
		}

		//======================================================================
		//
		//======================================================================
		IBaseIntf * CreateInterface( int nInterfaceID )
		{
			switch ( nInterfaceID )
			{
				case 0: return NEW CRendererD3D;
			}

			return NULL;
		}

	private :

		//======================================================================
		//
		//======================================================================
		size_t m_nNumInterfaces;

} * g_pLibrary;


/*
================================================================================
//	Name:
//	Desc:
================================================================================
*/
extern "C"
{
	//==========================================================================
	//
	//==========================================================================
	RENDERER_API ILibrary * InitLibrary( ISystem * pSystem )
	{
		if ( !g_pLibrary )
		{
			g_pSystem	= pSystem;
			g_pLibrary	= NEW CRendererLibInfo;
		}

		return g_pLibrary;
	}

	//==========================================================================
	//
	//==========================================================================
	RENDERER_API void UninitLibrary()
	{
		if ( g_pLibrary )
		{
			DEL( g_pLibrary	);
			g_pSystem	= NULL;
		}
	}
}

////////////////////////////////////////////////////////////////////////////////